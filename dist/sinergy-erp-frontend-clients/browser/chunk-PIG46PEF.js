import{A as j,t as P,y as V}from"./chunk-66A2AKCP.js";import{Fc as H,Q as r,R as x,Rb as A,Sb as z,T as w,U as k,Ya as S,Za as i,c as g,db as q,e as L,eb as b,qa as C,ra as f,ua as I}from"./chunk-56XCPM73.js";import{a as v,b as m}from"./chunk-7CGTOI24.js";var R=["*"];var _=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]];var $=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]];var Y=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]];var a1=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]];var e1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]];var t1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]];var c1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],h1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]];var d1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]];var o1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]];var s1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]];var i1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]];var y1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]];var n1=[["path",{d:"m12 8 6-3-6-3v10",key:"mvpnpy"}],["path",{d:"m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12",key:"ek95tt"}],["path",{d:"m6.49 12.85 11.02 6.3",key:"1kt42w"}],["path",{d:"M17.51 12.85 6.5 19.15",key:"v55bdg"}]];var r1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]];var k1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]];var p1=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]];var l1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]];var M1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]];var u1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]];var v1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]];var m1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]];var g1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]];var L1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]];var x1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]];var y={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},l=new w("LucideIcons",{factory:()=>new n({})}),n=class{constructor(e){this.icons=e}getIcon(e){return this.hasIcon(e)?this.icons[e]:null}hasIcon(e){return typeof this.icons=="object"&&e in this.icons}},T=(()=>{class c{constructor(){this.color=y.stroke,this.size=y.width,this.strokeWidth=y["stroke-width"],this.absoluteStrokeWidth=!1}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=r({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),U=c=>{for(let e in c)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};function O(c,e=3){return parseFloat(c.toFixed(e)).toString(10)}var w1=(()=>{class c{constructor(a,t,h,d,o){this.elem=a,this.renderer=t,this.changeDetector=h,this.iconProviders=d,this.iconConfig=o,this.absoluteStrokeWidth=!1,this.defaultSize=y.height}get size(){return this._size??this.iconConfig.size}set size(a){a?this._size=this.parseNumber(a):delete this._size}get strokeWidth(){return this._strokeWidth??this.iconConfig.strokeWidth}set strokeWidth(a){a?this._strokeWidth=this.parseNumber(a):delete this._strokeWidth}ngOnChanges(a){if(a.name||a.img||a.color||a.size||a.absoluteStrokeWidth||a.strokeWidth||a.class){this.color=this.color??this.iconConfig.color,this.size=this.parseNumber(this.size??this.iconConfig.size),this.strokeWidth=this.parseNumber(this.strokeWidth??this.iconConfig.strokeWidth),this.absoluteStrokeWidth=this.absoluteStrokeWidth??this.iconConfig.absoluteStrokeWidth;let t=this.img??this.name,h=this.getRestAttributes();if(U(h)||this.renderer.setAttribute(this.elem.nativeElement,"aria-hidden","true"),typeof t=="string"){let d=this.getIcon(this.toPascalCase(t));if(d)this.replaceElement(d);else throw new Error(`The "${t}" icon has not been provided by any available icon providers.`)}else if(Array.isArray(t))this.replaceElement(t);else throw new Error("No icon name or image has been provided.")}this.changeDetector.markForCheck()}replaceElement(a){let t=this.elem.nativeElement.childNodes,h=m(v({},y),{width:this.size,height:this.size,stroke:this.color??this.iconConfig.color,"stroke-width":this.absoluteStrokeWidth?O(this.strokeWidth/(this.size/this.defaultSize)):this.strokeWidth.toString(10)}),d=this.createElement(["svg",h,a]);d.classList.add("lucide"),typeof this.name=="string"&&d.classList.add(`lucide-${this.name.replace("_","-")}`),this.class&&d.classList.add(...this.class.split(/ /).map(o=>o.trim()).filter(o=>o.length>0));for(let o of t)this.renderer.removeChild(this.elem.nativeElement,o);this.renderer.appendChild(this.elem.nativeElement,d)}getRestAttributes(){let a=this.elem.nativeElement.attributes;return Object.fromEntries(Array.from(a).map(h=>[h.name,h.value]))}toPascalCase(a){return a.replace(/(\w)([a-z0-9]*)(_|-|\s*)/g,(t,h,d)=>h.toUpperCase()+d.toLowerCase())}parseNumber(a){if(typeof a=="string"){let t=parseInt(a,10);if(isNaN(t))throw new Error(`${a} is not numeric.`);return t}return a}getIcon(a){for(let t of Array.isArray(this.iconProviders)?this.iconProviders:[this.iconProviders])if(t.hasIcon(a))return t.getIcon(a);return null}createElement([a,t,h=[]]){let d=this.renderer.createElement(a,"http://www.w3.org/2000/svg");return Object.keys(t).forEach(o=>{let p=typeof t[o]=="string"?t[o]:t[o].toString(10);this.renderer.setAttribute(d,o,p)}),h.length&&h.forEach(o=>{let p=this.createElement(o);this.renderer.appendChild(d,p)}),d}}return c.\u0275fac=function(a){return new(a||c)(i(I),i(S),i(H),i(l),i(T))},c.\u0275cmp=q({type:c,selectors:[["lucide-angular"],["lucide-icon"],["i-lucide"],["span-lucide"]],inputs:{class:"class",name:"name",img:"img",color:"color",absoluteStrokeWidth:"absoluteStrokeWidth",size:"size",strokeWidth:"strokeWidth"},standalone:!1,features:[f],ngContentSelectors:R,decls:1,vars:0,template:function(a,t){a&1&&(A(),z(0))},encapsulation:2}),c})(),M=class{constructor(e){this.icons=e}},G=c=>new n(c??{}),C1=(()=>{class c{static pick(a){return{ngModule:c,providers:[{provide:l,multi:!0,useValue:new n(a)},{provide:l,multi:!0,useFactory:G,deps:[[new C,M]]}]}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=b({type:c}),c.\u0275inj=x({imports:[[]]}),c})();var s=class extends Error{};s.prototype.name="InvalidTokenError";function W(c){return decodeURIComponent(atob(c).replace(/(.)/g,(e,a)=>{let t=a.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function E(c){let e=c.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return W(e)}catch{return atob(e)}}function u(c,e){if(typeof c!="string")throw new s("Invalid token specified: must be a string");e||(e={});let a=e.header===!0?0:1,t=c.split(".")[a];if(typeof t!="string")throw new s(`Invalid token specified: missing part #${a+1}`);let h;try{h=E(t)}catch(d){throw new s(`Invalid token specified: invalid base64 for part #${a+1} (${d.message})`)}try{return JSON.parse(h)}catch(d){throw new s(`Invalid token specified: invalid json for part #${a+1} (${d.message})`)}}var B={api:"http://localhost:3001/api",production:!1};var F=class c{constructor(e,a,t){this.router=e;this.http=a;this.activated_route=t;this.BuildTokensToInit()}api=B.api;user_info;name_token="sinergy_erp_token";token;permissions$=new L(new Set);BuildTokensToInit(){localStorage.getItem(this.name_token)?(this.user_info=u(localStorage.getItem(this.name_token)||"{}"),this.token=localStorage.getItem(this.name_token)||""):localStorage.removeItem(this.name_token)}logout(){this.token="",this.user_info=null,localStorage.removeItem(this.name_token),this.router.navigate(["/login"])}login(e){return new g(a=>{this.http.post(`${this.api}/auth/login`,e).subscribe(t=>{if(t&&t.token){let h=t.token;localStorage.setItem(this.name_token,h),this.token=h;let d=this.decodeJWT(h);console.log(d),this.setPermissions(d)}a.next(t),a.complete()},t=>{a.error(t)})})}setPassword(e){return this.http.post(this.api+"/auth/user/login",e)}setPermissions(e){let a=new Set;Array.isArray(e)&&e.forEach(t=>{let h=this.normalizePermission(t);a.add(h)}),this.permissions$.next(a)}normalizePermission(e){if(!e||typeof e!="string")return e;let a=e.split(":");if(a.length!==2)return e;let t=a[0].toLowerCase(),h=a[1];return`${t}:${h}`}hasPermission(e){if(!e||typeof e!="string")return!1;let a=this.normalizePermission(e);return this.permissions$.getValue().has(a)}can(e,a){if(!e||!a||typeof e!="string"||typeof a!="string")return!1;let t=`${a}:${e}`;return this.hasPermission(t)}canRead(e){return this.can("Read",e)}canCreate(e){return this.can("Create",e)}canUpdate(e){return this.can("Update",e)}canDelete(e){return this.can("Delete",e)}decodeJWT(e){try{if(!e||typeof e!="string")return[];let a=u(e);if(!a||typeof a!="object")return[];let t=a.permissions;return Array.isArray(t)?t:[]}catch(a){return console.error("Error decoding JWT token:",a),[]}}static \u0275fac=function(a){return new(a||c)(k(j),k(P),k(V))};static \u0275prov=r({token:c,factory:c.\u0275fac,providedIn:"root"})};export{_ as a,$ as b,Y as c,a1 as d,e1 as e,t1 as f,c1 as g,h1 as h,d1 as i,o1 as j,s1 as k,i1 as l,y1 as m,n1 as n,r1 as o,k1 as p,p1 as q,l1 as r,M1 as s,u1 as t,v1 as u,m1 as v,g1 as w,L1 as x,x1 as y,w1 as z,C1 as A,B,F as C};
