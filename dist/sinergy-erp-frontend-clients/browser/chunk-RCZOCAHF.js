import{b as R,c as p,e as B,f as V,g as G,j,l as q,q as z,s as _,t as U,v as Y}from"./chunk-7TNFDLAZ.js";import{B as A,f as T,g as k,y as L,z as N}from"./chunk-5MRBIJ7N.js";import{A as D,c as P,e as F,m as O}from"./chunk-UZLFZEBK.js";import{Ab as f,Cc as M,Fb as s,Gb as o,Hb as r,Ib as m,Pb as I,Ta as n,Tb as g,Vb as h,aa as w,ab as c,ba as S,gb as d,hc as l,jc as v,mb as y,na as b,vb as E,yb as u}from"./chunk-NOG5ANO3.js";import"./chunk-7CGTOI24.js";function W(t,a){t&1&&(o(0,"span",7),l(1,"*"),r())}function X(t,a){if(t&1&&(o(0,"label",1),l(1),u(2,W,2,0,"span",7),r()),t&2){let i=h();n(),v(" ",i.label," "),n(),f(i.showError?2:-1)}}function Z(t,a){t&1&&(o(0,"p",6),l(1,"Revisa este campo."),r())}var x=class t{form_control;label;has_error=!1;placeholder="***********";eye=!1;EyeIcon=k;EyeOffIcon=T;input=new G("");subscription;get showError(){return this.has_error||!!this.form_control&&this.form_control.invalid&&this.form_control.touched}ngOnInit(){this.form_control&&(this.input.setValue(this.form_control.value??"",{emitEvent:!1}),this.subscription=this.input.valueChanges.subscribe(a=>{this.form_control.setValue(a)}))}ngOnDestroy(){this.subscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=d({type:t,selectors:[["app-password"]],inputs:{form_control:"form_control",label:"label",has_error:"has_error",placeholder:"placeholder"},decls:7,vars:8,consts:[[1,"w-full"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"relative"],[1,"w-full","rounded-lg","border","px-3","py-2","pr-10","text-sm","focus:outline-none","focus:ring-2",3,"type","formControl","placeholder","ngClass"],["type","button",1,"absolute","inset-y-0","right-0","flex","items-center","px-3","text-gray-500","hover:text-gray-700",3,"click"],[1,"h-5","w-5",3,"img"],[1,"mt-1","text-xs","text-red-600"],[1,"text-red-500"]],template:function(i,e){i&1&&(o(0,"div",0),u(1,X,3,2,"label",1),o(2,"div",2),m(3,"input",3),o(4,"button",4),g("click",function(){return e.eye=!e.eye}),m(5,"lucide-icon",5),r()(),u(6,Z,2,0,"p",6),r()),i&2&&(n(),f(e.label?1:-1),n(2),s("type",e.eye?"text":"password")("formControl",e.input)("placeholder",e.placeholder)("ngClass",e.showError?"border-red-400 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"),n(),E("aria-label",e.eye?"Ocultar contrase\xF1a":"Mostrar contrase\xF1a"),n(),s("img",e.eye?e.EyeIcon:e.EyeOffIcon),n(),f(e.showError?6:-1))},dependencies:[_,R,B,j,P,N,L],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:8px}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}.input[_ngcontent-%COMP%]{width:100%;position:relative}.input[_ngcontent-%COMP%]   .ti[_ngcontent-%COMP%]{position:absolute;color:#222;font-size:28px;right:10px;cursor:pointer;top:50%;transform:translateY(-50%)}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 46px 8px 16px}"]})};function $(t,a){t&1&&(o(0,"div",15),l(1," Sinergy ERP "),r())}function ee(t,a){if(t&1&&(o(0,"p",16),l(1),r()),t&2){let i=h();n(),v(" ",i.error()," ")}}var H=class t{constructor(a,i,e){this.fb=a;this.router=i;this.authService=e;this.form=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(3)]]})}form;loading=b(!1);error=b(null);submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading.set(!0),this.error.set(null),this.authService.login(this.form.value).subscribe({next:a=>{localStorage.setItem(this.authService.name_token,a.access_token),this.authService.BuildTokensToInit(),this.router.navigate(["/"])},error:()=>{this.loading.set(!1),this.error.set("Usuario o contrase\xF1a incorrectos")}})}static \u0275fac=function(i){return new(i||t)(c(z),c(D),c(A))};static \u0275cmp=d({type:t,selectors:[["app-login"]],decls:20,vars:5,consts:[["noLogo",""],[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100","px-4"],[1,"w-full","max-w-md"],[1,"bg-white","rounded-xl","shadow-lg","p-8"],[1,"flex","justify-center","mb-6"],[1,"text-2xl","font-semibold","text-center","text-gray-800"],[1,"text-sm","text-center","text-gray-500","mt-1","mb-6"],[3,"formGroup"],[1,"flex","flex-col","gap-4"],["label","Correo",3,"form_control"],["label","Contrase\xF1a",3,"form_control"],["class","mt-3 text-sm text-red-600",4,"ngIf"],[3,"click","loading"],[1,"mt-6","text-center"],["href","#",1,"text-sm","text-indigo-600","hover:underline"],[1,"h-12","flex","items-center","text-xl","font-semibold","text-gray-700"],[1,"mt-3","text-sm","text-red-600"]],template:function(i,e){if(i&1){let C=I();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),y(4,$,2,0,"ng-template",null,0,M),r(),o(6,"h1",5),l(7," Bienvenido "),r(),o(8,"p",6),l(9," Ingresa a tu cuenta!! "),r(),o(10,"div",7)(11,"div",8),m(12,"app-input",9)(13,"app-password",10),r(),y(14,ee,2,1,"p",11),o(15,"app-button",12),g("click",function(){return w(C),S(e.submit())}),l(16,"Iniciar sesi\xF3n"),r()(),o(17,"div",13)(18,"a",14),l(19," \xBFOlvidaste tu contrase\xF1a? "),r()()()()()}i&2&&(n(10),s("formGroup",e.form),n(2),s("form_control",e.form.controls.email),n(),s("form_control",e.form.controls.password),n(),s("ngIf",e.error),n(),s("loading",e.loading()))},dependencies:[O,F,_,V,q,U,x,Y],encapsulation:2})};export{H as Login};
